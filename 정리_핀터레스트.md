##### 핀터레스트를 만들겁니다.

- 글, 마이페이지, 반응형, 댓글, 팔로우, 구독, ... 등등 만들 예정
- 프론트엔드 - JS, HTML, CSS
- 백엔드 - NGINX(서버), django(프레임워크), docker(배포), 마리아(DB)

![img](https://blog.kakaocdn.net/dn/QERpw/btqQjob2AmK/HcvryVTiY0UMJHatNagaK1/img.png)

요렇게 만들면 이 장고 서비스 하나가 도커 - 하나의 컨테이너가 됨

![img](https://blog.kakaocdn.net/dn/UusRc/btqQhK7v2Tj/iJI2d2Itn3qO2ixoNZNiT1/img.png)

이렇게 집어넣어줌. 이런식으로 각각의 컨테이너를 구축해서 도커 시스템으로 구축

마지막에 VULTR 라는 가상 서버 빌린 후 구축한 도커 시스템 올려서 서비스를 배포 해볼거에요!



##### 개발환경 셋업

==> [점프투장고](https://wikidocs.net/72377) 참조하기, 이건 가상환경 가서 django같은거 설치하고 플젝 생성이고

아래건 실제 환경에 django 설치하고 추가한거(이건 venv(가상환경)가 플젝 파일에 자동으로 생성)

- mkdir NAME
- cd NAME
- django-admin startproject config . 
- 그 플젝 열고 인터프리터 가서 add 하고 ok 눌러주면 새로운 가상환경 추가됨

##### MVC(Model View Controller)

- 애플에서 만든 개발 패턴인데 장고는 여기서 controller대신 template으로 (거의 명칭만 다름)

- Model: DB관련
- View: 유저-서버 통신(인증, 계산, 확인 등)
- Template: 인터페이스
- template <-> view <-> model

##### Acoount

- 터미널 들어가서 (ctrl + shift + tap + t)
- python manage.py startapp accountApp
- project/settings.py 에서 installed_apps 에서 'accountApp' 매핑 시켜줌

```python
#accountApp/views.py
def hello_world(request):
    return HttpResponse('Hello world')	#Alt + Enter 누르면 자동으로 import해줌 개꿀
```

```python
#accountApp/urls.py
path('account/', include('accountApp.urls'))	#이거 추가해서 매핑시켜줌
```

```python
#config/urls.py
app_name = 'accountApp'		#이렇게 해두면 나중에 함수써서 쉽게 호출가능
urlpatterns = [
    path('hello_world/', hello_world, name='hello_world')
]
```

- 이러고 서버 구동 시킨 후 http://127.0.0.1:8000/account/hello_world/ 들어보면 잘 뜸

##### git ignore(7강 참고)

- project - .gitignore 파일 만들고 [요기](https://github.com/github/gitignore/blob/master/Global/JetBrains.gitignore)에서 복붙 해넣으면 필요없는거 추적 안함

- config/settings.py 에 secret_key 관리해줘야하는데, [요기](https://django-environ.readthedocs.io/en/latest/)서 secret_key 노출 안시키고 내부 파일에서 자동으로 읽어서 개선해줄 수 있음
- 위 사이트에서 하란대로 하면 됨 pip install dajngo-environ

```python
#settings
import environ
env = environ.Env(
    # set casting, default value
    DEBUG=(bool, False)
)
```

- .env 파일 만들어서

```python
#.env
DEBUG=on
SECRET_KEY=your-secret-key			#이부분 settings에 있는 내 secret_key 입력(''x)
DATABASE_URL=psql://urser:un-githubbedpassword@127.0.0.1:8458/database
SQLITE_URL=sqlite:///my-local-sqlite.db
CACHE_URL=memcache://127.0.0.1:11211,127.0.0.1:11212,127.0.0.1:11213
REDIS_URL=rediscache://127.0.0.1:6379/1?client_class=django_redis.client.DefaultClient&password=ungithubbed-secret
```

```python
#settings
import os
#BASE_DIR아래쪽에
environ.Env.read_env(
    env_file = os.path.join(BASE_DIR, '.env')
)
```

```python
#settings 가서 이렇게 수정하고
SECRET_KEY = env('SECRET_KEY')
#.gitignore 가서
.env 	#라고 추가해주면 추적 안됨
```

- VCS - Enable Version control integration 누르고 git 누르면 추적 되는거 안되는거 구분 됨
- git status 해가면서 필요 없는거 추가해주면 됨 (Ex. .idea/)

```python
#.gitignore
.env
db.sqlite3
.idea/
__pycache__/
#가상환경 python에서 그냥 만들었으면 venv/ 추가
```

##### template

- extends: 바탕을 깔아주는 느낌

![img](https://blog.kakaocdn.net/dn/UrTQz/btqQu4dP7X7/AaEjIiB1hKj30qnZNmQq10/img.png)

- include: 뭔가를 가져와서 갖다 붙이는 느낌

![img](https://blog.kakaocdn.net/dn/xe51n/btqQmQujZen/SDdFPPj7v0c3ExWZIsZb9K/img.png)

![img](https://blog.kakaocdn.net/dn/bKaDgC/btqQu5cHWuy/XYg7Z1reb2rjmkzFwBCEIk/img.png)

- project 폴더에 templates 폴더 생성, 그 안에 base.html 생성

- views.py에서 html파일(템플릿) 가지고 와서 그 내용 채워넣는 형식으로 만들거임

```python
#views.py
def hello_world(request):
    return render(request, 'base.html')
```

```python
#config/settings.py 에 매핑 해줘야함
TEMPLATES = [
    {
        'DIR': [os.path.join(BASE_DIR, 'templates')],
    }
]
```

- templates파일에 head.html 생성

```html
<!-- head.html -->
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
```

```html
<!-- base.html -->
<!DOCTYPE html>
<html lang="ko">
    
{% include 'head.html' %}
<body>
    <!-- border-radius: 블럭의 가장자리, margin: 컴포넌트 사이 마진?-->
    <div style='height: 10rem; background-color: #38df81; border-radius: 1rem; margin: 2rem'> 
    </div>
    
    <div style='height: 20rem; background-color: #38df81; border-radius: 1rem; margin: 2rem'> 
    </div>
    
    <div style='height: 10rem; background-color: #38df81; border-radius: 1rem; margin: 2rem'> 
    </div>
    </body>
</html>
```

- ##### Tip] 알트 누르고 커서 여러개 클릭하면 다중커서 조절 가능!!

- 서버 켜서 어떻게 되었나 한번 확인해보기

- 여기 body에서 3개 부분이 있는데 첫부분, 세번째 부분은 계속 사용할거므로 include 구문 사용해서 만들어줌

```html
<!-- header.html, footer.html 만들고 아래처럼 include하면 똑같이 쓸수있음-->
<body>
	{% include 'header.html' %}
    {% block content %}
    {% endblock %}
    {% include 'footer.html' %}
</body>
```

- content부분 accountApp 내부에서 사용할거임, 이제 그거 사용하기 위해
- accountApp 폴더에 templates 폴더 만들고, 그 안에 accountApp 폴더 만들어줌
- 그 안에다가 .html 파일 만들어줄거, 저거 폴더 많이 만드는 이유는 나중에 가져오는 코드 짤때 가독성 높이기 위해서래
- hello_wolrd.html 만들고 

```html
<!--아래처럼 하면 base.html 내용 다 가져오는데 block만 바꿀 수 있음-->
{% extends 'base.html' %}	

<!-- 아래처럼 내용 쓰면 렌더링 하게 됨-->
{% block content %}
	<div style='height: 20rem; background-color: #38df81; border-radius: 1rem; margin: 2rem'>
        <h1>
            test1
        </h1>
	</div>
{% endblock %}
```

```python
#accountApp/views.py
def hello_world(request):
    return render(request, 'accountApp/hello_world.html')
```

##### style

- 윗 부분을 꾸며봅시다~

```html
<!--header.html-->
<div>
    <div>
        <h1>pinterest</h1>
    </div>
    <div>
        <span>nav1</span>
        <span>nav2</span>
        <span>nav3</span>
        <span>nav4</span>
    </div>
</div>
```

- 이거 하고 서버 키고 들어가보면 왼쪽에 가있는데 F12 눌러서 테스트 해볼 수 있음
- div쪽 누르고 style 부분에 text-align: cneter; 이런식으로 테스트 가능
- 이번엔 밑 부분을 꾸며봅시다~

```html
<!--footer.html-->
<div style="text-align:center; margin-top: 2rem;">
    <div style="font-size: .6rem;">
        <span>공지사항</span> |
        <span>제휴문의</span> |
        <span>서비스 소개</span>
    </div>
    <div style="margin-top: 1rem;">
        <h6 style="margin-top: 1rem;">pinterest</h6>
    </div>
</div>
```

- margin: 2rem 0; 이러면 앞에 숫자는 상하, 뒤에 숫자는 좌우
- base.html <body>에 위, 중간, 아래 사이에 <hr> 구분선 넣어주면 더 이뻐짐

##### bootstrap

- [여기](https://getbootstrap.com/docs/5.0/getting-started/introduction/)들어가서 css 복사 한 후에 head.html <head>쪽에 넣어줌
- Tip) ctrl + / 하면 주석
- 구글 폰트 검색해서 글자 써보고 이뻐보이는 폰트 고르면 됨 select this style 누르면 링크 뜨는데 head.html 파일에 복붙해주면 됨(이런거 적용하면서 어떤건지 주석 달기)
- css rules to specify families 부분 복사해서 적용할 곳에 붙여넣기 해넣어주면 끝(적용할 style 부분, 여기선 header.html의 제목부분, footer.html의 아래 제목 부분)

##### CSS파일 분리

- 보통 html에 뼈대만 남겨두고 style 같은거(디자인적인거) css로 빼줌
- static 설정 해볼거

```python
#setting.py
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')	#나중에 python manage.py collectstatic 하면 static 파일 모아주는데 그 모아주는 위치임
STATICFILES_DIRS = [
    BASE_DIR / "static",
]
```

- tip) ctrl + b 하면 선언된 곳 찾아줌
- 프로젝트 폴더에 static 폴더 만들어줌 여기서 static 파일들 관리할거
- static에서 base.css 생성

```html
<!-- footer.html -->
<!-- 수정 -->
<h6 class="pinterest_footer_logo">pinterest</h6>
```

```css
/* base.css */
.pinterest_footer_logo{
    font-family: 'Lobster', cursive;
}
```

```html
<!-- head.html -->
{% load static %}	<!-- 맨 위에 -->

<!-- DEFAULT CSS LINK -->
<link rel="stylesheet" type="text/css" href="{% static 'base.css'%}">
```

```python
#settings.py
STATIC_URL = '/head.html/'
```

- 추가로 style => class로 바꿔서 base.css로 넘겨주는거 11강_13분~

##### CSS 핵심

- display

  - block
    - 부모의 최대한의 너비 가지고 블록 모양으로 있는 애
  - Inline
    - 글씨의 높이만큼
  - Inline-block
    -  블록인데 inline처럼 안쪽부터 쌓이는 블록
  - None
    - 없어요

- visibility

  - hidden
    - display가 만약 None으로 바뀌면 빈곳  채워 넣는데 visibility-hidden이면 보이진 않지만 존재함 다른거 그대로

- size

  :Respnsive 즉, 반응형으로 만들어야 하므로 size 중요

  - px
    - 부모에 상관없이 픽셀 크기만큼
  - em
    - 부모가 커지면 그만큼 자기도 커짐
    - 근데 부모가 여러개 있을 때 문제 (Ex.할아버지가 2배, 부모 2배 되면 자신은 4배 됨)
  - <u>rem</u>
    - 부모에 상관없이 root HTML의 사이즈에 따라 바뀜
- 1rem = 16px이 기본
  
  - %
    - 바로 위의 부모만 따라감 

##### display 실습

- style 적용 방법 3가지

```html
<!-- 적용 우선순위 1, 3, 2-->
<!-- 1 -->
<div style=""> </div>
<!-- 2 -->
<div class ="NAME"> </div>
.NAME {
	STYLE
}
<!-- 3 -->
<style>
    .tesing{
        background-color: white;
    }
</style>
```

```html
<!-- display 실습 -->
<style>
    .testing{
        background-color: white;
        height: 3rem;
        width: 3rem;
        margin: 1rem;
    }
</style>
<div class="testing" style="display: block;"> block </div>
<div class="testing" style="display: block;"> block </div>
<div class="testing" style="display: inline;"> inline </div>
<div class="testing" style="display: inline;"> inline </div>
<div class="testing" style="display: None;"> None </div>
<div class="testing" style="display: inline-block;"> inline-block </div>
<div class="testing" style="display: inline-block;"> inline-block </div>
<div class="testing"> div_default </div>
<span class="testing"> span_default</span>
```

- div 기본 속성 block
- span 기본 속성 inline 
- 이렇게 놀다가 commit 안해도 되니까 git reset --hard HEAD 하면 가장 최근 커밋으로 돌아감

##### Model

```python
#accountApp/models.py
class HelloWorld(models.Model):
    text = models.CharField(max_length=255, null=False)	#null은 공백이여도 되는지
```

- python manage.py makemigrations  (models.py에 쓰는 내용을 DB와 연동시킬 파이썬 파일로 만들어주는 작업)
- python manage.py migrate 해주면 적용됨
- tip) migrations 파일들 지우는거 지양하기 고치려면 복잡해짐

##### HTTP 프로토콜 (GET, POST)

- GET
  - 조회
  - 추가적인 parameter 주소에 같이 보내줌
- POST
  - 무언갈 만들거나 수정할 때
  - 데이터 BODY에 넣어 보냄

##### HTTP 실습

```html
<!-- hello_world.html -->
<form actions="/account/hello_world/" method="post">	
	<input type="submit" class="btn btn-primary" value="POST">
</form>
```

- 첫 줄은 action 주소로 method를 보내겠다 이런뜻
- 이대로 서버 돌려서 버튼 눌러보면 에러뜸

```html
<!-- form 안에 명시해줘야함 -->
{% csrf_token %}
```

- csrf_token은 장고에서 제공하는 보안 기능 중 하나임

```python
#accountApp/views.py
def hello_world(request):
    
    if request.method == "POST":
        return render(request, 'accountApp/hello_world.html', context={'text': 'POST METHOD!'})
	else:
        return render(request, 'accountApp/hello_wolrd.html', context={'text': 'GET METHOD!'})
```

```html
<!-- hello_world.html -->
{{ text }}
```

##### POST 통신을 통한 DB데이터 저장

- 중간 초록색 없애주기(hello_world.html 가서 높이, 배경색 지우기)
- 내용 중간으로 모아주기(text-align: center)

```html
<!-- hello_world.html -->
<h1 style = "font-family: 'lobster', 'cursive';">
	Hello World LIST!                                                 
</h1>
<form action="/account/hello_world/" method="post">
    {% csrf_token %}
    <div>
        <input type="text" name="hello_world_input">
    </div>
    <div>
        <input type="submit" class="btn btn-primary" value="POST">
    </div>
    <h1>
        {{ text }}
    </h1>
</form>
```

```python
#views.py
#hello_world() if문
temp = request.POST.get('hello_world_input')
return render(request, 'accountApp/hello_world.html', context={'text': temp})
```

- 여기까지 하면 통신해서 데이터 긁어오는거함
- 아래서는 그 데이터 저장하는 거까지

```python
#views.py
#hello_world() if문
temp = request.POST.get('hello_world_input')
new_hello_world = HelloWorld()
new_hello_world.text = temp
new_hello_world.save()					  #DB에 저장
return render(request, 'accountApp/hello_world.html', context={'hello_world_output': new_hello_world })	#객체를 보내는거임 따라서 아래에 추가 작업
```

```html
<!-- hello_world.html -->
{% if hello_world_output %}
<h1>
    {{ hello_world_output.text }}
</h1>
{% endif %}
```

##### DB정보 접근 및 for loop

```python
#views.py
#new_hello_world.save() 아래쪽에 추가
#(GET, POST 두 부분 모두 아래 두줄 추가)
hello_world_list = HelloWorld.objects.all()	#HelloWorld의 모든 데이터 긁어옴
return render(request, 'accountApp/hello_world.html', context={'hello_world_list': hello_world_list })
```

- hello_world.html 가서 hello_world_output => hello_world_list로

- 이러고 테스트 해보면 오브젝트 통째로 나옴, 보기 좋게 바꿔주려면 아래처럼 수정

```html
<!-- hello_world.html -->
{% if hello_world_list %}
	{% for hello_world in hello_world_list %}
	<h4>
        {{ hello_world.text }}
	</h4>
	{% endfor %}
{% endif %}
```

- 이러고 테스트 해보면 잘나옴, 근데 F5 누르면 계속 반복해서 쌓임 이거 고쳐주려면

```python
#views.py
#post 완료한 이후 get으로 되돌아가서 이런 상황 발생하지 않기 위해서 해주는 작업
#POST부분 return 아래처럼 바꿔줌
return HttpResponseRedirect('account/hello_world/')
#위처럼 해도 되는데 urls.py에서 이름 저장해놓은거 이용해서 바꿔주면
return HttpResponseRedirect(reverse('accountApp:hello_world'))
#바로 윗줄 이름 부분 :다음 공백 넣었다가 오류 났었음
```

##### 디버깅

- 중단점 설정하고

- Run-EditConfigurations-Templates-python
- Script path => 가상환경 폴더 - Scripts로 정해줌
- Parameters => runserver
- 확인하고 나와서 왼쪽에 manage.py 우클릭,  Debug 'manage' 하면 서버 실행되면서 디버깅 가능
- 서버에서 어떤 이벤트 발생시키면서 중단점 때의 상태 볼 수 있음

##### Class Based View, 장고의 CRUD (이론 위주)

- **C**reate **R**ead **U**pdate **D**elete	=> 장고에선 이 네가지 작업 쉽게 할 수 있는 클래스 제공(CBV)
- CBV <-> FunctionBasedView: 지금까지 만든 함수 기반 뷰
- CBV으로 짜면 생산성, 가독성 좋아짐

![img](https://blog.kakaocdn.net/dn/Kxrs5/btqQPzkuojQ/CEf0O0BhXsh7ao3tfI7EnK/img.png)

- 앞으로 이런 형태의 account앱을 만들거임

##### CreateView를 통한 회원가입 구현

```python
#views.py에 추가
class AccountCreateView(CreateView):
    model = User		#tip) ctrl + b 누르면 그 소스코드로 갈 수 있음
    form_class = UserCreationForm
    success_url = reverse_lazy('accountApp:hello_world')
    template_name = 'accountApp/create.html'
```

- 함수랑 class 불러오는 방식때문에 class에서 reverse()쓰면 에러뜸 그래서 reverse_lazy 써준거

```python
#urls.py - urlpatterns에 추가
path('create/', AccountCreateView.as_view(), name = 'create'),
```

```html
<!-- accountApp-templates-accountApp에 create.html 생성 후 -->
{% extends 'base.html' %}
{% block content %}
	<div style = "text-align: center">
        <form action="{% url 'accountApp:create' %}" method = "post">
            {% csrf_token %}
            {{ form }}
            <input type="submit" class="btn btn-primary">
        </form>
	</div>
{% endblock %}
```

- 서버 키고 테스트 해보기 (127.0.0.1:8000/account/create)

##### Login/ Logout 구현

```python
#url.py - urlpatterns에 추가, login, logout은 간단해서 여기에 직접 선언할거임
path('login/', LoginView.as_view(template_name='accountApp/login.html'), name='login')
path('logout/', LogoutView.as.view(), name='logout' )
```

```html
<!-- accountApp-templates-accountApp에 login.html 생성 -->
{% extends 'base.html' %}
{% block content %}
	<div style="text-align: center">
        <div>
            <h4>
                Login
            </h4>
        </div>
        <div>
            <form action="" method="post">
                {% csrf_token %}
                {{ form }}
                <input type="submit" class="btn btn-primary"
            </form>
        </div>
	</div>
{% endblock %}
```

- 주소/accountApp/login 테스트 해보면 잘 나옴

![img](https://blog.kakaocdn.net/dn/bOIqmA/btqQ0O1Zmba/LmC7e6h8C9tTSTXWx7cDSK/img.png)

- Login View가 이런 과정을 거치는데, 위에까지는 next, login_redirect_url 둘 다 안설정해줘서 아이디랑 비번 쳐보면 Default 값으로 가서 에러났었음, 원치 않는 경로로 가지 않도록 아래에 설정해줄거

```html
<!-- header.html - nav 부분 수정 -->
{% if not user.is_authenticated %}		<!-- login 안되어 잇으면 login 보여줌-->
<a href="{% url 'accountApp:login' %}?next={{ request.path}}">
	<span>login</span>
</a>
{% else %}
<a href="{% url 'accountApp:logout' %}?next={{ request.path}}">
    <span>logout</span>
</a>
{% endif %}
```

- login 이나 logout 완성 하고 난 후 다시 갈 경로 next로 받아줌. get방식으로 받은거

- 이렇게해도 accountApp/login 직접 들어가서 치면 default로 넘어가는데, 이거 방지하려고 이번에는 login_redirect_url 설정해줄거

```python
#pinterest - settings.py에 추가
LOGIN_REDIRECT_URL = reverse_lazy('accountApp:hello_world')
LOGOUT_REDIRECT_URL = reverse_lazy('accountApp:login')
```

##### Bootstrap을 이용한 Form 디자인 정리

- pip install django-bootstrap4

```python
#settings.py - INSTALLED_APPS에 추가
'bootstrap4',
```

```html
<!-- login.html 윗부분에 추가-->
{% load bootstrap4 %}
<!-- {{ form }} 부분 수정-->
{% bootstrap_form form %}
<!-- style 부분에 max-width: 500px; margin: 4rem auto 추가 -->
<!-- btn도 수정해줌 "btn btn-dark rounded-pill col-3 mt-3" -->
```

- mt는 margin-top 이고, mt-3은 기존의 3배
- col-6 같은 경우는 12가 100%고 6이면 50%, 3이면 25%(부모 너비의)

```html
<!-- create.html 위 login.html처럼 수정-->
{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}

	<div style="text-align: center; max-width: 500px; margin: 4rem auto">
        <div class="mb-4">
            <h4>
                SignUp
            </h4>
        </div>
        <form action="{% url 'accountApp:create' %}" method="post">
            {% csrf_token %}
            {% bootstrap_form form %}
            <input type="submit" class="btn btn-dark rounded-pill col-6 mt-3">
        </form>
	</div>

{% endblock %}
```

- 이번엔 hello_world 부분 폰트 바꿔줄거
- 글꼴 otf 설치한 후에 압축 풀고 .otf 이름 간단한 것들만 복사해서
- pinterest-static에 fonts 폴더 생성해서 복사한 파일들 붙여넣기

```html
<!-- head.html - </head> 윗부분에 아래와 같은 형식으로 4개 추가 -->
<style>
    @font-face {
        font-family: 'NAME';
        src: local('NAME'),
            url("{% static 'fonts/NAME.otf' %}" format("opentype"))
    }
</style>
```

```html
<!-- base.html <body> 부분 수정 -->
<body style="font-family: 'NAME'">
```

- 이러고 account/hello_world 테스트 해보면 잘 됨

##### DetailView를 이용한 개인 페이지 구현(ReadView부분)

```python
#views 부분 추가
class AccountDetailView(DetailView):
    model = User
    template_name = 'accountApp/detail.html'
```

```html
<!-- detail.html 만들어서 -->
{% extends 'base.html' %}
{% block content %}
	<div>
        <div style="text-align: center; max-width: 500px; margin: 4rem auto;">
            <p>
                {{ user.date_joined }}
            </p>
            <h2>
                {{ user.username}}
            </h2>
        </div>
	</div>
{% endblock %}
```

```python
#urls.py - urlpatterns에 추가
path('detail/<int:pk>', AccountDetailView.as_view(), name='detail'),
```

- detail에서 특정 유저의 정보를 봐야하니까 그 계정의 PK가 필요, 그래서 <int: pk> 선언해줌

```html
<!-- header.html - else 아래 추가-->
<a href="{% url 'accountApp: detail' pk=user.pk %}">
	<span>MyPage</span>
</a>
```

- 테스트 해보면 logout 상태에서 Mypage안보이고 login 상태면 Mypage 보임
- 접속한 유저의 페이지만 볼 수 있으니까 좀 수정해주면

```python
#views.py - AccountDetailView() 부분에 추가
context_object_name = 'target_user'
```

- detail.html의 user 부분 target_user로 수정

- 이렇게해서 다른사람이 내 페이지 왔을때 내 페이지 보여줄 수 있음

##### UpdateView를 이용한 비밀번호 변경 구현

```python
#views.py에 추가
class AccountUdateView(UpdateView):
    model = User
    form_classurl = reverse_lazy('accountApp:hello_world')
    template_name = 'accountApp/update.html'
```

```python
#url.py - urlpatterns에 추가
path('update/<int:pk', AccountUpdateView.as_view(), name='update')
```

```html
<!-- update.html 생성 후 -->
{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}

	<div style="text-align: center; max-width: 500px; margin: 4rem auto">
        <div class="mb-4">
            <h4>
                Change Info
            </h4>
        </div>
        <form action="{% url 'accountApp:update' %}" method="post">
            {% csrf_token %}
            {% bootstrap_form form %}
            <input type="submit" class="btn btn-dark rounded-pill col-6 mt-3">
        </form>
	</div>

{% endblock %}
```

```html
<!-- detail html 수정, +++detail부분 target_user로 바꾸는거 찾아서 고치기 -->
{% extends 'base.html' %}
{% block content %}
	<div>
        <div style="text-align: center; max-width: 500px; margin: 4rem auto;">
            <p>
                {{ target_user.date_joined }}
            </p>
            <h2>
                {{ target_user.username}}
            </h2>
            
            {% if target_user == user %}
            <a href="{% url 'accountApp:update' pk=user.pk %}">
                <p>
                    Change Info
                </p>
            </a>
            {% endif %}
        </div>
	</div>
{% endblock %}
```

- 이러고 account/detail 테스트 해보면 ChangeInfo 나옴, 그거 누르면 바꿀수있음
- 문제: 아이디 바꿔서 비번 바꾸면 아이디도 바뀜. 따라서 Username칸 비활성화 시켜줘야함

```python
#accountApp(부모) - forms.py 생성
from django.contrib.auth.forms import UserCreationForm
class AccountUpdateForm(UserCreationForm):	#상속 받아줌
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        
        self.fields['username'].disalbled = True
```

- 상속 받아서 UserCreationForm = AccountUpdateForm 인데, 마지막줄 추가시켜줘서 초기화 이후에 저 값을 바꿔줌(username 칸을 비활성화 시켜줌) 이런식으로 커스터마이징함

```python
#urls.py - AccountUpdateView() 부분 수정
form_class = AccountUpdateForm
```

